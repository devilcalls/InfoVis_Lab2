---
title: "Lab2"
format: html
editor: visual
author: "Daniel Lip", "Pierre Chan", Howard Yeo", "Joel Koh", "Jolie Yeo"
---

# Task 1

```{r}
library(tidyverse)
library(readxl)
library(waldo)

gdp <- read_xls("API_NY.GDP.PCAP.CD_DS2_en_excel_v2_85284.xls", skip=3)
gdp_2019 <- select(gdp, name = 'Country Name', code = 'Country Code', gdp_per_capita = '2019')
gdp_2019

life_exp <- read_xls("API_SP.DYN.LE00.IN_DS2_en_excel_v2_85119.xls", skip=3)
life_exp_2019 <- select(life_exp, name = 'Country Name', life_exp = '2019')

pop <- read_xls("API_SP.POP.TOTL_DS2_en_excel_v2_85347.xls", skip=3)
pop_2019 <- select(pop, name = 'Country Name', pop = '2019')

# combine the three dataframes together
combined_df <- inner_join(gdp_2019, life_exp_2019, join_by(name))
combined_df <- inner_join(combined_df, pop_2019, join_by(name))

# load countrycode
library("countrycode")
data(codelist)
cleaned_codelist <- select(codelist, continent, code=wb)
combined_df <- inner_join(combined_df, cleaned_codelist, join_by(code))

# sort alphabetically
arr_df <- arrange(combined_df, name)

# remove na rows
arr_df <- drop_na(arr_df, gdp_per_capita)
arr_df <- drop_na(arr_df, continent)

arr_df <- rename(arr_df, gdp_per_cap = gdp_per_capita)

world_ref <- readr::read_csv("country_profiles_2019.csv")
waldo::compare(arr_df, world_ref, tolerance = 1e-12)
```

# Task 2

```{R}
pop_stats = read_xlsx("outputFile.xlsx", sheet = "T4", skip = 10)
pop_stats_sliced = slice(pop_stats, 26:75) # adjusted for the skip 

```

# Reflection
